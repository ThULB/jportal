<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
	<link href="/rsc/derivatebrowser/gui/css/derivatebrowser.css" rel="stylesheet" type="text/css">
<title>MyCore File Browser</title>
</head>
<body>
	<div id="filebrowser">
		<div id="folder-list-div" class="well">
		   	<div id="folder-list-search" class="input-group input-group-sm">
              <input id="folder-list-search-input" class="form-control" type="text" placeholder="Suchen..." />
              <span class="input-group-btn">
                <button id="folder-list-search-button" class="btn btn-default" type="button">
                  <i class="glyphicon glyphicon-search"></i>
                </button>
              </span>
            </div>
			<ul id="folder-list-ul"></ul>
		</div>
		<div id="file-view" class="well" ondragover="return false">
<!-- 			<div id="drag-and-drop-info"><span id="hide-drag-drop-info" class="glyphicon glyphicon-remove"></span></div> -->
			<div id="files">
				<div id="upload-overlay" class="hidden"></div>
				<div class="panel panel-default hidden" id="derivat-panel">
					<div id="collapseOne" class="panel-collapse collapse in">
						<div class="panel-body">
							<dl>
								<dt>Name:</dt>
								<dd id="derivat-panel-name"></dd>
								<dt>Size:</dt>
								<dd id="derivat-panel-size"></dd>
								<dt>last modified:</dt>
								<dd id="derivat-panel-last"></dd>
<!-- 								<dt>Startdatei:</dt> -->
<!-- 								<dd id="derivat-panel-startfile"> -->
<!-- 									<div id="derivat-panel-startfile-label"></div> -->
<!-- 									<span id="derivat-panel-startfile-btn" class="glyphicon glyphicon-edit btn"></span> -->
<!-- 								</dd> -->
							</dl>
							<div id="derivat-panel-startfile">
								<label>Startdatei</label>
								<figure>
									<img id='panel-img' src=''>
								    <figcaption class="panel-img-cap">
								    	<h5 id="derivat-panel-startfile-label"></h5>
								    </figcaption>
								    <div id="derivat-panel-startfile-overlay-div" class="hidden">
								    	<div id="derivat-panel-startfile-overlay-label">
								    	Drag and Drop to change.
<!-- 										    <span id="derivat-panel-startfile-btn-edit" class="glyphicon glyphicon-edit btn startfile-btn"></span> -->
<!-- 										    <span id="derivat-panel-startfile-btn-confirm" class="glyphicon glyphicon-ok btn startfile-btn hidden"></span> -->
<!-- 										    <span id="derivat-panel-startfile-btn-cancel" class="glyphicon glyphicon-remove btn startfile-btn hidden"></span> -->
										</div>
								    </div>
        						</figure>
<!-- 								<span id="derivat-panel-startfile-btn" class="glyphicon glyphicon-edit btn"></span> -->
							</div>
							<button id="btn-urnAll" type="button" class="btn btn-default">
 									<span class="glyphicon glyphicon glyphicon-tags"></span>
 									&nbsp;URN für Derivat vergeben
							</button>
						</div>
					</div>
					<div id="collapse-btn-div"><span id="collapse-btn" class="glyphicon glyphicon-chevron-up btn" data-toggle="collapse" data-target="#collapseOne"> </span></div>
				</div>
				<div id="derivate-browser" class="hidden">
					<ol  id="derivate-browser-breadcrumb" class="breadcrumb">
					</ol>
					<table id="browser-table" class="table table-hover table-condensed" cellspacing="0">
						<thead>
							<tr id="browser-table-head">
								<th></th>
								<th></th>
								<th>Filename</th>
								<th>URN</th>
							</tr>
						</thead>
						<tbody id="browser-table-files">	
						</tbody>
					</table>
					<div id="bottom-btns">
						<span class="glyphicon glyphicon-folder-close btn-add btn"></span>
						<span class="glyphicon glyphicon-plus btn-add1 btn"></span>
						<span class="glyphicon glyphicon-plus btn-add2 btn"></span>
<!-- 						<span class="glyphicon glyphicon-plus btn-add3 btn"></span> -->
						<span class='glyphicon glyphicon-unchecked btn-check-all btn'></span>
						<span class='glyphicon glyphicon-trash btn-delete-all btn faded'></span>
						<span class='glyphicon glyphicon-share-alt btn-move-all btn faded'></span>
					</div>
				</div>
				<div id="journal-info" class="hidden">
					<button id="journal-info-button-edit"type="button" class="btn btn-primary">Edit</button>
					<div id="journal-info-text"></div>
				</div>
			</div>
		</div>
		<div id="upload-status-bar" class="hidden">
			<div id="upload-status-bar-header">
				<span class="glyphicon glyphicon-cloud-upload"></span>
				<div id="upload-status-bar-header-label">Upload...</div>
				<span class="glyphicon glyphicon-remove btn-close-usb btn"></span>
				<span class="glyphicon glyphicon-minus btn-mini-usb btn"></span>
			</div>
			<div id="upload-status-bar-body">
				<table>
					<tbody id="upload-status-bar-table">
<!-- 						<tr class="upload-entry"> -->
<!-- 						<td><img class='upload-preview-image' src="//lh6.ggpht.com/t9kbY1GAjgY-4jyTgWDiZnSNgTiFbTKYZeraqc4epFGE11lO9z-R5acrnMvq_ocxdxwEnjm6la8Cvo59ii2NhZ3ER43kQLeTEULaiGST=s660"></img></td> -->
<!-- 						<td class="upload-preview-name">Bild bla bla</td> -->
<!-- 						<td class="upload-preview-size">1337 GB</td> -->
<!-- 						<td class="upload-preview-status"><div class='statusbar-progress'><div class='statusbar-progress-status'></div></div></td> -->
<!-- 						</tr> -->
					</tbody>
				</table>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="lightbox-multi-move" tabindex="-1" role="dialog" aria-labelledby="lightbox-multi-move-label" aria-hidden="true" data-backdrop="static">
		<div class="modal-dialog">
			<div class="modal-content">
			 	<div class="modal-header">
					<button type="button" class="close lightbox-multi-move-cancel" data-dismiss="modal" aria-hidden="true">X</button>
					<h4 id="lightbox-multi-move-label" class="modal-title">Zielort auswählen</h4>
				</div>				
				<div class="modal-body">
					<ul id="target-panel-childlist" class="panel-list">
				    </ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default lightbox-multi-move-cancel" data-dismiss="modal" aria-hidden="true">cancel</button>
					<button type="button" id="lightbox-multi-move-confirm" class="btn btn-primary" >confrim</button>
				</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="lightbox-upload-overwrite" tabindex="-1" role="dialog" aria-labelledby="lightbox-upload-overwrite-label" aria-hidden="true" data-backdrop="static">
		<div class="modal-dialog">
			<div class="modal-content">
			 	<div class="modal-header">
					<button type="button" class="close lightbox-multi-move-cancel" data-dismiss="modal" aria-hidden="true">X</button>
					<h4 id="lightbox-upload-overwrite-label" class="modal-title">Aktion auswählen</h4>
				</div>				
				<div class="modal-body">
					<div id="lightbox-upload-overwrite-text">Die Datei existiert bereits. Soll die Datei überschrieben werden?</div>
					<div id="lightbox-upload-overwrite-original">
						<div id="lightbox-upload-overwrite-original-label" class="overwrite-label">Original Datei</div>
						<div id="lightbox-upload-overwrite-original-file" class="overwrite-content"></div>
					</div>
					<div id="lightbox-upload-overwrite-new">
						<div id="lightbox-upload-overwrite-new-label" class="overwrite-label">Neue Datei</div>
						<div id="lightbox-upload-overwrite-new-file" class="overwrite-content"></div>
					</div>
				</div>
				<div class="modal-footer">
						<div>
							<span class="glyphicon glyphicon-unchecked btn-upload-all btn"></span>
							<p id="btn-upload-all-label">Für alle folgenden übernehmen<p>
						</div>
						<div>
							<button type="button" id="btn-upload-overwrite" class="btn btn-warning btn-upload">Überschreiben</button>
							<button type="button" id="btn-upload-skip" class="btn btn-primary btn-upload" >Überspringen</button>
							<button type="button" id="btn-upload-cancel" class="btn btn-default btn-upload">Upload abbrechen</button>
						</div>
<!-- 					<button type="button" class="btn btn-default lightbox-multi-move-cancel" data-dismiss="modal" aria-hidden="true">Überschreiben</button> -->
				</div>
			</div>
		</div>
	</div>

	<script id="popover-template" type="text/mustache">
	<div>
		<img class='popover-img' src='/servlets/MCRFileNodeServlet/{{deriID}}{{absPath}}'>
		<dl>
			<dt>Size</dt>
			<dd class="img-size">{{size}}</dd>
			<dt>last modified</dt>
			<dd>{{lastmodified}}</dd>
		</dl>
	</div>
	</script>
	
	<script id="file-entry-template" type="text/mustache">
		<tr class="browser-table-file browser-table-entry">
			<td><span data-trigger="hover" data-title="{{name}}"
				data-placement="right" data-toggle="popover" rel="popover"
				class="glyphicon glyphicon-picture popover-file"></span></td>
			<td>
				<div class="btns">
					<span class="glyphicon glyphicon-unchecked btn-check btn invisable"></span>
					<span class="glyphicon glyphicon-edit btn-edit btn invisable"></span>
					<span class="glyphicon glyphicon-trash btn-delete btn invisable"></span>
				</div>
			</td>
			<td class="browser-table-file-name">{{name}}</td>
			<td class="browser-table-file-urn">
				{{#urn}}
					{{urn}}
				{{/urn}}
				{{^urn}}
					<div class="no-urn">-</div>
					<span class="glyphicon glyphicon-tag btn-new-urn btn invisable"></span>
				{{/urn}}
			</td>
		</tr>
	</script>
	
	<script id="folder-entry-template" type="text/mustache">
		<tr class="browser-table-folder browser-table-entry">
			<td><span class="glyphicon glyphicon-folder-close btn-folder"></span></td>
			<td>
				<div class="btns">
					<span class="glyphicon glyphicon-unchecked btn-check btn invisable"></span>
					<span class="glyphicon glyphicon-edit btn-edit btn invisable"></span>
					<span class="glyphicon glyphicon-trash btn-delete btn invisable"></span>
				</div>
			</td>
			<td class="browser-table-file-name">{{name}}</td>
			<td class="browser-table-file-urn">
				{{#urn}}
					{{urn}}
				{{/urn}}
				{{^urn}}
					
				{{/urn}}
			</td>
		</tr>
	</script>
	
	<script id="target-folder-entry-template" type="text/mustache">
		<li class="target-folder-entry" data-path="{{absPath}}">
			<div class="no-button"> </div>
			{{#isRoot}}
				<span class="glyphicon glyphicon-picture icon"></span>
			{{/isRoot}}
			{{^isRoot}}
				<span class="glyphicon glyphicon-folder-close icon"></span>
			{{/isRoot}}
			<div class="folder-name">{{name}}</div>
			{{#hasChildren}}
				<ul>
					{{#children}}
						{{>recursive}}
					{{/children}}
				</ul>
			{{/hasChildren}}
		</li>
	</script>
	
	<script id="upload-entry-template" type="text/mustache">
		<tr class="upload-entry">
			<td><img class='upload-preview-image'></img></td>
			<td class="upload-preview-name" title="{{name}}">{{name}}</td>
			<td class="upload-preview-size" title="{{size}}">{{size}}</td>
			<td class="upload-preview-status"><div class='statusbar-progress'><div class='statusbar-progress-status'></div></div></td>
		</tr>
	</script>
	
	<script id="upload-overwrite-template" type="text/mustache">
		<div>
			<img class='overwrite-img' src='/servlets/MCRFileNodeServlet/{{deriID}}{{path}}/{{name}}'>
			<dl>
				<dt>Size</dt>
				<dd class="img-size">{{size}}</dd>
				<dt>last modified</dt>
				<dd>{{lastmodified}}</dd>
			</dl>
		</div>
	</script>
	
	
<!-- 				<td class="upload-preview-overlay hidden" colspan="2"> -->
<!-- 				<div class="upload-preview-overlay-label">Datei existiert bereits, bitte Aktion wählen</div> -->
<!-- 				<div class="upload-preview-overlay-button hidden"> -->
<!-- 					<button type="button" class="btn btn-primary upload-preview-overlay-overwrite btn-overlay">Überschreiben</button> -->
<!-- 					<button type="button" class="btn btn-danger upload-preview-overlay-discard btn-overlay">Verwerfen</button> -->
<!-- 				</div> -->
<!-- 			</td> -->

 	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
 	<script src="//cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.js"></script>
 	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
 	<script src="/rsc/derivatebrowser/gui/js/derivatebrowser.js"></script>
 	<script src="/rsc/derivatebrowser/gui/js/derivatebrowser-upload.js"></script>
 	<script type="text/javascript" src="/js/jp-subselect.js" ></script>
</body>
</html>