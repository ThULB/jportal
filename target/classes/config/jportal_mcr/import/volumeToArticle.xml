<?xml version="1.0" encoding="UTF-8"?>
<import xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="/home/matthias/workspace2/jportal2/jpApp/modules/jportal/components/mycore-importer/src/main/resources/schema/import.xsd">
  <config>
    <projectName>jportal</projectName>
    <datamodelPath>{MCR.basedir}/../jpApp/modules/jportal/config/</datamodelPath>
    <saveToPath>{MCR.basedir}/build/import/</saveToPath>
    <createClassificationMapping>false</createClassificationMapping>
  </config>

  <mapping>
    <resolvers>
    </resolvers>

    <mcrobjects>
      <mcrobject name="article" datamodel="datamodel/jparticle.xml">

        <!-- parent -->
        <map fields="mycoreobject/structure/parents/parent/@xlink:href" type="parent">
          <attributes>
            <attribute name="href" namespace="xlink" value="{mycoreobject/structure/parents/parent/@xlink:href}" />
          </attributes>
        </map>

        <!-- maintitle -->
        <map fields="mycoreobject/metadata/maintitles/maintitle" to="maintitle" type="multidata">
          <conditions>
            <condition format="xml">
              <condition value1="{mycoreobject/metadata/maintitles/maintitle/@inherited}" operator="=" value2="0"/>
            </condition>
          </conditions>
          <text value="{mycoreobject/metadata/maintitles/maintitle}" />
        </map>

        <!-- subtitle -->
        <map fields="mycoreobject/metadata/subtitles/subtitle" to="subtitle" type="multidata">
          <conditions>
            <condition format="xml">
              <condition value1="{mycoreobject/metadata/subtitles/subtitle/@inherited}" operator="=" value2="0"/>
            </condition>
          </conditions>
          <text value="{mycoreobject/metadata/subtitles/subtitle}" />
          <attributes>
            <attribute name="type" value="{mycoreobject/metadata/subtitles/subtitle/@type}" />
          </attributes>
        </map>

        <!-- participant -->
        <map fields="mycoreobject/metadata/participants/participant" to="participant" type="multidata">
          <conditions>
            <condition format="xml">
              <condition value1="{mycoreobject/metadata/participants/participant/@inherited}" operator="=" value2="0"/>
            </condition>
          </conditions>
          <attributes>
            <attribute name="href" namespace="xlink" value="{mycoreobject/metadata/participants/participant/@xlink:href}" />
            <attribute name="label" namespace="xlink" value="{mycoreobject/metadata/participants/participant/@xlink:label}" />
            <attribute name="title" namespace="xlink" value="{mycoreobject/metadata/participants/participant/@xlink:title}" />
            <attribute name="type" namespace="xlink" value="{mycoreobject/metadata/participants/participant/@xlink:type}" />
          </attributes>
        </map>

        <!-- date -->
        <map fields="mycoreobject/metadata/dates/date" to="date" type="multidata">
          <conditions>
            <condition format="xml">
              <boolean operator="and">
                <condition value1="{mycoreobject/metadata/dates/date/@inherited}" operator="=" value2="0"/>
                <boolean operator="or">
                  <condition value1="{mycoreobject/metadata/dates/date/@type}" operator="=" value2="published"/>
                  <condition value1="{mycoreobject/metadata/dates/date/@type}" operator="=" value2="published_from"/>
                  <condition value1="{mycoreobject/metadata/dates/date/@type}" operator="=" value2="published_until"/>
                </boolean>
              </boolean>
            </condition>
          </conditions>
          <text value="{mycoreobject/metadata/dates/date}" />
          <attributes>
            <attribute name="type" value="{mycoreobject/metadata/dates/date/@type}" />
          </attributes>
        </map>
        
        <!-- identis -->
        <map fields="mycoreobject/metadata/identis/identi" to="identi" type="multidata">
          <conditions>
            <condition format="xml">
              <condition value1="{mycoreobject/metadata/identis/identi/@inherited}" operator="=" value2="0"/>
            </condition>
          </conditions>
          <text value="{mycoreobject/metadata/identis/identi}" />
          <attributes>
            <attribute name="type" value="{mycoreobject/metadata/identis/identi/@type}" />
          </attributes>
        </map>

       <!-- abstracts -->
        <map fields="mycoreobject/metadata/abstracts/abstract" to="abstract" type="multidata">
          <conditions>
            <condition format="xml">
              <condition value1="{mycoreobject/metadata/abstracts/abstract/@inherited}" operator="=" value2="0"/>
            </condition>
          </conditions>
          <text value="{mycoreobject/metadata/abstracts/abstract}" />
        </map>

        <!-- notes -->
        <map fields="mycoreobject/metadata/notes/note" to="note" type="multidata">
          <conditions>
            <condition format="xml">
              <condition value1="{mycoreobject/metadata/notes/note/@inherited}" operator="=" value2="0"/>
            </condition>
          </conditions>
          <text value="{mycoreobject/metadata/notes/note}" />
          <attributes>
            <attribute name="type" value="annotation" />
          </attributes>
        </map>

      </mcrobject>
    </mcrobjects>
  </mapping>
</import>