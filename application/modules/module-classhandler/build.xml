<?xml version="1.0" encoding="UTF-8"?>

<!-- =================================================================== -->
<!-- ClassHandler module build file for use with Apache Ant              -->
<!-- $Revision: 1.5 $ $Date: 2006/12/11 13:45:57 $                      -->
<!-- =================================================================== -->

<project name="MyCoReModule - ClassHandler" default="webapps" basedir="../..">

  <import file="${basedir}/common-modules.xml" />
	
  <!-- =================================================================== -->
  <!-- Help on usage                                                       -->
  <!-- =================================================================== -->

  <target name="usage">
    <echo level="info">
      Usage:
        ant [target]

      Available targets are:
        webapps              --> Build the complete sample web application directory

      Please do not use any of the other targets, they are internal.
    </echo>
  </target>
	
  <!-- =================================================================== -->
  <!-- Build the web application directory and copy webpages               -->
  <!-- =================================================================== -->
	
  <target name="webapps">
	<echo level="info">
			building ${ant.project.name} webapp
	</echo>
    <!-- Copy the images to the application --> 
    <copy todir="${build.webapps}/images">
      <fileset file="${mycore.modules}/module-classhandler/images/*.gif"/>
    </copy>
    <!-- Copy the stylesheet to the application --> 
    <copy todir="${build.webapps}/WEB-INF/stylesheets">
      <fileset file="${mycore.modules}/module-classhandler/stylesheets/mcr_doc_browse-edit.xsl"/>
      <fileset file="${mycore.modules}/module-classhandler/stylesheets/mcr_doc_browse-search.xsl"/>
      <fileset file="${mycore.modules}/module-classhandler/stylesheets/mcr_doc_browse-subselect.xsl"/>
    </copy>
    <!-- Copy the webpages to the application --> 
    <copy todir="${build.webapps}">
	  <fileset dir="${mycore.modules}/module-classhandler/webpages" includes="*.xml"/>
    </copy>
    <!-- Copy the editor config to the application --> 
    <copy todir="${build.webapps}/editor">
      <fileset file="${mycore.modules}/module-classhandler/config/editor-create-category.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-create-classification.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-import-classification.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-modify-category.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-modify-classification.xml"/>
    </copy>
    <copy todir="${build.webapps}/WEB-INF/classes">
      <fileset file="${mycore.modules}/module-classhandler/config/editor-create-category.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-create-classification.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-import-classification.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-modify-category.xml"/>
      <fileset file="${mycore.modules}/module-classhandler/config/editor-modify-classification.xml"/>
    </copy>
    <!-- merge the web.xml of the module to the application -->
    <available property="web.xml.present" file="${mycore.modules}/module-classhandler/config/web.xml" />
    <antcall target="do.merge" >
      <param name="web.xml.file"   value="${mycore.modules}/module-classhandler/config/web.xml" />
    </antcall>
	<!-- merge I18N files -->
	<antcall target="properties.merge">
	  <param name="module" value="${mycore}/modules/module-classhandler/config/messages_de.properties"/>
	  <param name="locale_param" value="de"/>
	</antcall>			
	<antcall target="properties.merge">
	  <param name="module" value="${mycore}/modules/module-classhandler/config/messages_en.properties"/>
	  <param name="locale_param" value="en"/>
	</antcall>
  </target>
	
  <!-- =================================================================== -->
	
</project>
