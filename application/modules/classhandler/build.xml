<?xml version="1.0" encoding="UTF-8"?>

<!-- =================================================================== -->
<!-- ClassHandler module build file for use with Apache Ant              -->
<!-- $Revision: 1.8 $ $Date: 2007-05-25 19:33:16 $                      -->
<!-- =================================================================== -->

<project name="MyCoReModule - ClassHandler" default="webapps" basedir="../..">

    <property name="build.sysclasspath" value="last" />
	<import file="${basedir}/common-modules.xml" />
	<property name="module.base" value="classhandler" />
	<property name="module.dir" value="${basedir}/modules/${module.base}" />
	
	<!-- =================================================================== -->
	<!-- Help on usage                                                       -->
	<!-- =================================================================== -->

	<target name="usage">
		<echo level="info">

      Available targets are:
        webapps              --> Build the complete sample web application directory
        webapps.i18n         --> Build the messages_[lang].properties

      Please do not use any of the other targets, they are internal.
		</echo>
	</target>
	
	<!-- =================================================================== -->
	<!-- Info                                                                -->
	<!-- =================================================================== -->

	<target name="info">
		<echo>${ant.project.name} will include programs classification handler of the web application.</echo>
	</target>
	
	<!-- =================================================================== -->
	<!-- Build the web application directory and copy webpages               -->
	<!-- =================================================================== -->
	
	<target name="webapps">
		<echo level="info">
			building ${ant.project.name} webapp
		</echo>
		<!-- Copy the images to the application --> 
		<copy todir="${build.webapps}/images">
			<fileset file="${mycore.modules}/classhandler/images/*.gif"/>
		</copy>
		<!-- Copy the stylesheet to the application --> 
		<copy todir="${build.webapps}/WEB-INF/stylesheets">
			<fileset file="${mycore.modules}/classhandler/stylesheets/mcr_doc_browse-edit.xsl"/>
			<fileset file="${mycore.modules}/classhandler/stylesheets/mcr_doc_browse-search.xsl"/>
			<fileset file="${mycore.modules}/classhandler/stylesheets/mcr_doc_browse-subselect.xsl"/>
		</copy>
		<!-- Copy the webpages to the application --> 
		<copy todir="${build.webapps}">
			<fileset dir="${mycore.modules}/classhandler/webpages" includes="*.xml"/>
		</copy>
		<!-- Copy the editor config to the application --> 
		<copy todir="${build.webapps}/editor">
		   <fileset file="${mycore.modules}/classhandler/config/imports-common-classhandler.xml"/>
		</copy>
		<copy todir="${build.webapps}/WEB-INF/classes">
			<fileset file="${mycore.modules}/classhandler/config/imports-common-classhandler.xml"/>
		</copy>
		<!-- merge the web.xml of the module to the application -->
		<available property="web.xml.present" file="${mycore.modules}/classhandler/config/web.xml" />
		<antcall target="do.merge" >
			<param name="web.xml.file"   value="${mycore.modules}/classhandler/config/web.xml" />
		</antcall>

	</target>
    	
	<target name="webapps.i18n" >
		<echo level="info">
			building ${ant.project.name} webapp.i18n
		</echo>
    	
		<!-- merge I18N files -->
		<antcall target="properties.merge">
			<param name="module" value="${mycore}/modules/classhandler/config/messages_de.properties"/>
			<param name="locale_param" value="de"/>
		</antcall>			
		<antcall target="properties.merge">
			<param name="module" value="${mycore}/modules/classhandler/config/messages_en.properties"/>
			<param name="locale_param" value="en"/>
		</antcall>
	</target>
	
  <!-- =================================================================== -->
	
</project>
