<?xml version="1.0" encoding="UTF-8"?>

<searchfields xmlns="http://www.mycore.org/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mycore.org/ searchfields.xsd">

  <!-- Search in MCRObject metadata -->
  <index id="metadata">

    <!-- Search in service/structural metadata -->  
    <field name="id"            type="identifier" source="objectMetadata" xpath="/mycoreobject" value="@ID" />
    <field name="objectType"    type="identifier" source="objectMetadata" xpath="/mycoreobject" value="substring-before(substring-after(@ID,'_'),'_')" />
    <field name="link"          type="identifier" source="objectMetadata" xpath="/mycoreobject/descendant::*[@xlink:href]" value="@xlink:href" />
    <field name="parent"        type="identifier" source="objectMetadata" xpath="/mycoreobject/structure/parents/parent" value="@xlink:href" />
    <field name="modified"      type="timestamp"  source="objectMetadata" xpath="/mycoreobject/service/servdates/servdate[@type='modifydate']" value="concat(substring(.,1,10),' ',substring(.,12,8))" i18n="editor.search.document.datemod" />

    <!-- Search in all metadata fields (that have an xml:lang attribute) -->
    <field name="allMeta"       type="text"       source="objectMetadata" xpath="/mycoreobject/metadata/*/*" value="text()" i18n="editor.search.metadata" />

    <!-- Search in document metadata -->    
<!--    <field name="title"         type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/titles/title" value="text()" sortable="true" i18n="editor.search.document.title" />
    <field name="author"        type="name"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/creators/creator | /mycoreobject/metadata/publishers/publisher" value="text()" i18n="editor.search.document.author" />
    <field name="authorID"      type="identifier" source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/creatorlinks/creatorlink | /mycoreobject/metadata/publisherlinks/publisherlink" value="@xlink:href" />
    <field name="creator"       type="name"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/creators/creator" value="text()" i18n="editor.search.document.creator" />
    <field name="creatorID"     type="identifier" source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/creatorlinks/creatorlink" value="@xlink:href" />
    <field name="publisher"     type="name"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/publishers/publisher" value="text()" i18n="editor.search.document.publisher" />
    <field name="publisherID"   type="identifier" source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/publisherlinks/publisherlink" value="@xlink:href" />
    <field name="contributor"   type="name"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/contributors/contributor" value="text()" i18n="editor.search.document.contrib" />
    <field name="contributorID" type="identifier" source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/contributorlinks/contributorlink" value="@xlink:href" />
    <field name="origin"        type="identifier" source="objectCategory" objects="document" xpath="/mycoreobject/metadata/origins/origin" value="@ID" i18n="editor.search.document.origin" classification="DocPortal_class_00000003" />
    <field name="subject"       type="identifier" source="objectCategory" objects="document" xpath="/mycoreobject/metadata/subjects/subject" value="@ID" i18n="editor.search.document.subject" classification="DocPortal_class_00000007" />
    <field name="format"        type="identifier" source="objectCategory" objects="document" xpath="/mycoreobject/metadata/formats/format" value="@ID" i18n="editor.search.document.format" classification="DocPortal_class_00000006" />
    <field name="language"      type="identifier" source="objectCategory" objects="document" xpath="/mycoreobject/metadata/languages/language" value="@ID" i18n="editor.search.document.lang" classification="DocPortal_class_00000004" />
    <field name="type"          type="identifier" source="objectCategory" objects="document" xpath="/mycoreobject/metadata/types/type" value="@ID" i18n="editor.search.document.type" classification="DocPortal_class_00000005" />
    <field name="keywords"      type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/keywords/keyword" value="text()" i18n="editor.search.document.keyword" />
    <field name="description"   type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/descriptions/description" value="text()" i18n="editor.search.document.descript" />
    <field name="source"        type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/sources/source" value="text()" i18n="editor.search.document.source" />
    <field name="coverage"      type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/coverages/coverage" value="text()" i18n="editor.search.document.coverage" />
    <field name="rights"        type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/rights/right" value="text()" i18n="editor.search.document.rights" />
    <field name="relation"      type="text"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/relations/relation" value="text()" i18n="editor.search.document.relation" />
    <field name="isbn"          type="identifier" source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/isbns/isbn" value="text()" />
    <field name="dateCreated"   type="date"       source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/dates/date[starts-with(@type,'create')]" value="ext:normalizeDate(string(text()))" sortable="true" i18n="editor.search.document.datecr" />
    <field name="identifier"    type="identifier" source="objectMetadata" objects="document" xpath="/mycoreobject/metadata/identifiers/identifier" value="text()" i18n="editor.search.document.identifier" />
-->
    <!-- Search in author or institution metadata -->
<!--    <field name="callname"      type="name"       source="objectMetadata" objects="author" xpath="/mycoreobject/metadata/names/name/callname" value="text()" />
    <field name="surname"       type="name"       source="objectMetadata" objects="author" xpath="/mycoreobject/metadata/names/name/surname"  value="text()" i18n="editor.search.author.surname" />
    <field name="name"          type="name"       source="objectMetadata" objects="author institution" xpath="/mycoreobject/metadata/names/name" value="concat(surname,' ',callname,' ',fullname,' ',nickname)" sortable="true" i18n="editor.search.author.label" />
    <field name="national"      type="identifier" source="objectCategory" objects="author" xpath="/mycoreobject/metadata/nationals/national" value="@ID" />
    <field name="institution"   type="identifier" source="objectCategory" objects="author" xpath="/mycoreobject/metadata/institutions/institution" value="@ID" i18n="editor.search.institution.label" classification="DocPortal_class_00000002" />
    <field name="profession"    type="text"       source="objectMetadata" objects="author" xpath="/mycoreobject/metadata/professions/profession" value="text()" />
    <field name="profclass"     type="identifier" source="objectCategory" objects="author" xpath="/mycoreobject/metadata/profclasses/profclass" value="@ID" />
-->	  
	<!-- Search in journals metadata -->
    <field name="maintitles"     type="name"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/maintitles/maintitle" value="text()" sortable="true" i18n="editor.search.document.maintitle" />
	<field name="subtitles"      type="name"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/subtitles/subtitle" value="text()" i18n="editor.search.document.subtitle" />
	<field name="mainedis"       type="identifier" source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/mainedis/mainedi" value="@xlink:href" i18n="editor.search.document.mainedi" />
	<field name="subedis"        type="identifier" source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/subedis/subedi" value="@xlink:href" i18n="editor.search.document.subedi" />
	<field name="authors"        type="identifier" source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/authors/author" value="@xlink:href" i18n="editor.search.document.author" />
	<field name="contribus"      type="name"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/contribus/contribu" value="text()" i18n="editor.search.document.contribu" />
	<field name="dates"          type="date"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/dates/date" value="ext:normalizeDate(string(text()))" sortable="true" i18n="editor.search.document.date" />
	<field name="keywords"       type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/keywords/keyword" value="text()" i18n="editor.search.document.keyword" />
	<field name="classis"        type="identifier" source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/classis/classi" value="classid" i18n="editor.search.document.classi" />
	<field name="abstracts"      type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/abstracts/abstract" value="text()" i18n="editor.search.document.abstract" />
	<field name="identis"        type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/identis/identi" value="text()" i18n="editor.search.document.identi" />
	<field name="languages"      type="identifier" source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/languages/language" value="@xlink:href" i18n="editor.search.document.language" />
	<field name="rightsjournal"  type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/rights/right" value="text()" i18n="editor.search.document.right" />                
	<field name="notes"          type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/notes/note" value="text()" i18n="editor.search.document.note" />
	<field name="types"          type="identifier" source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/types/type" value="@xlink:href" i18n="editor.search.document.type" />
	<field name="predeces"       type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/predeces/predece" value="@xlink:title" i18n="editor.search.document.predece" />
	<field name="predeceslink"   type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/predeces/predece" value="@xlink:href" i18n="editor.search.document.predecelink" />  	  
	<field name="successors"     type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/successors/successor" value="@xlink:title" i18n="editor.search.document.successor" />
	<field name="successorslink" type="text"       source="objectMetadata" objects="jpjournal" xpath="/mycoreobject/metadata/successors/successor" value="@xlink:href" i18n="editor.search.document.succeslink" />  
	
	<!-- Search in volumes metadata -->  
	<field name="maintitles2"     type="name"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/maintitles/maintitle" value="text()" sortable="true" i18n="editor.search.document.maintitle" />
	<field name="subtitles2"      type="name"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/subtitles/subtitle" value="text()" i18n="editor.search.document.subtitle" />
	<field name="mainedis2"       type="identifier" source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/mainedis/mainedi" value="@xlink:href" i18n="editor.search.document.mainedi" />
	<field name="subedis2"        type="identifier" source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/subedis/subedi" value="@xlink:href" i18n="editor.search.document.subedi" />
	<field name="authors2"        type="identifier" source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/authors/author" value="@xlink:href" i18n="editor.search.document.author" />
	<field name="contribus2"      type="name"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/contribus/contribu" value="text()" i18n="editor.search.document.contribu" />
	<field name="dates2"          type="date"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/dates/date" value="ext:normalizeDate(string(text()))" sortable="true" i18n="editor.search.document.date" />
	<field name="keywords2"       type="text"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/keywords/keyword" value="text()" i18n="editor.search.document.keyword" />
	<field name="abstracts2"      type="text"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/abstracts/abstract" value="text()" i18n="editor.search.document.abstract" />
	<field name="identis2"        type="text"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/identis/identi" value="text()" i18n="editor.search.document.identi" />
	<field name="languages2"      type="identifier" source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/languages/language" value="@xlink:href" i18n="editor.search.document.language" />
	<field name="rightsjournal2"  type="text"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/rights/right" value="text()" i18n="editor.search.document.right" />                
	<field name="notes2"          type="text"       source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/notes/note" value="text()" i18n="editor.search.document.note" />
	<field name="types2"          type="identifier" source="objectMetadata" objects="jpvolume" xpath="/mycoreobject/metadata/types/type" value="@xlink:href" i18n="editor.search.document.type" />  
	
	<!-- Search in article metadata -->
    <field name="maintitles3"     type="name"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/maintitles/maintitle" value="text()" sortable="true" i18n="editor.search.document.maintitle" />
	<field name="subtitles3"      type="name"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/subtitles/subtitle" value="text()" i18n="editor.search.document.subtitle" />
	<field name="publishers3"     type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/publishers/publisher" value="@xlink:href" i18n="editor.search.document.publisher" />
	<field name="authors3"        type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/authors/author" value="@xlink:href" i18n="editor.search.document.author" />
	<field name="contribus3"      type="name"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/contribus/contribu" value="text()" i18n="editor.search.document.contribu" />
	<field name="dates3"          type="date"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/dates/date" value="ext:normalizeDate(string(text()))" sortable="true" i18n="editor.search.document.date" />
	<field name="keywords3"       type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/keywords/keyword" value="text()" i18n="editor.search.document.keyword" />
	<field name="classis3"        type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/classis/classi" value="classid" i18n="editor.search.document.classi" />
	<field name="classispub"      type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/classispub/classipub" value="classid" i18n="editor.search.document.classi1" />
	<field name="classispub2"     type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/classispub1/classipub2" value="classid" i18n="editor.search.document.classi2" />
	<field name="classispub3"     type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/classispub1/classipub3" value="classid" i18n="editor.search.document.classi3" />
	<field name="abstracts3"      type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/abstracts/abstract" value="text()" i18n="editor.search.document.abstract" />
	<field name="identis3"        type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/identis/identi" value="text()" i18n="editor.search.document.identi" />
	<field name="languages3"      type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/languages/language" value="@xlink:href" i18n="editor.search.document.language" />
	<field name="rightsjournal3"  type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/rights/right" value="text()" i18n="editor.search.document.right" />                
	<field name="notes3"          type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/notes/note" value="text()" i18n="editor.search.document.note" />
	<field name="types3"          type="identifier" source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/types/type" value="@xlink:href" i18n="editor.search.document.type" />
	<field name="rubrics3"        type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/rubrics/rubric" value="text()" i18n="editor.search.document.rubric" />
	<field name="sizes3"          type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/sizes/size" value="text()" i18n="editor.search.document.size" />  	  
	<field name="refs3"           type="text"       source="objectMetadata" objects="jparticle" xpath="/mycoreobject/metadata/refs/ref" value="text()" i18n="editor.search.document.ref" />

	<!-- Search in institutions metadata -->
    <field name="name"          type="name"       source="objectMetadata" objects="jpinst" xpath="/mycoreobject/metadata/names/name/fullname" value="text()" sortable="true" i18n="editor.search.jpinst.label" />
	  
  </index>

  <!-- Search in MCRFile metadata and content -->  
  <index id="content">
  
    <!-- Search in fulltext of pdf and txt files -->
    <field name="content" type="text" source="fileTextContent" objects="http pdf ps txt xml msword95 msword97 msppt rtf otd sxw" i18n="editor.search.fulltext" />
	
    <!-- Search in technical metadata of files -->
    <field name="fileID"            type="identifier" source="fileMetadata" xpath="file/@id" value="." />
    <field name="DerivateID"        type="identifier" source="fileMetadata" xpath="file/@owner" value="." />
    <field name="fileName"          type="identifier" source="fileMetadata" xpath="file/@name" value="." />
    <field name="filePath"          type="identifier" source="fileMetadata" xpath="file/@path" value="." />
    <field name="fileSize"          type="integer"    source="fileMetadata" xpath="file/@size" value="." />
    <field name="fileExtension"     type="identifier" source="fileMetadata" xpath="file/@extension" value="." />
    <field name="fileContentTypeID" type="identifier" source="fileMetadata" xpath="file/contentTypeID" value="." />
    <field name="fileContentType"   type="text"       source="fileMetadata" xpath="file/@contentType" value="." />
    <field name="fileDateModified"  type="date"       source="fileMetadata" xpath="file/@modified" value="ext:normalizeDate(string(.))" />
    
    <!-- Search in technical metadata of audio/video files -->
    <field name="avBitRate"         type="integer"    source="fileMetadata" xpath="file/@bitRate" value="." />
    <field name="avFrameRate"       type="decimal"    source="fileMetadata" xpath="file/@frameRate" value="." />
    <field name="avDuration"        type="time"       source="fileMetadata" xpath="file/@duration" value="." />
    <field name="avMediaType"       type="identifier" source="fileMetadata" xpath="file/@mediaType" value="." />

  </index>

</searchfields>
