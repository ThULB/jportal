<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- ============================================== -->
<!--  MyCoRe - Module-Imaging build file for use with ANT        -->
<!--  												-->
<!-- Module-Imaging 1.0, 05-2006  					-->
<!-- +++++++++++++++++++++++++++++++++++++			-->
<!--  												-->
<!-- Andreas Trappe 	- idea, concept				-->
<!-- Chi Vu Huu		- concept, development			-->
<!--												-->
<!-- $Revision: 1.5 $ $Date: 2006/11/22 12:20:38 $ 								-->


<project name="MyCoReModule - imaging" default="usage" basedir=".">

  <property name="build.sysclasspath" value="last" />

<!-- =================================================================== -->
<!-- The info target                                                     -->
<!-- =================================================================== -->

  <target name="info">
    <echo level="info">
           Ant version: ${ant.version}
      Java JDK version: ${java.version}
      Operating system: ${os.name}, version: ${os.version}, architecture: ${os.arch}
    </echo>
  </target>

<!-- =================================================================== -->
<!-- Help on usage                                                       -->
<!-- =================================================================== -->

  <target name="usage">
    <echo level="info">
      Usage:
        ant [target]

      Available targets are:
		info                 --> Shows Java/Ant/Operating System version
		install              --> install Module-Imaging
    </echo>
  </target>

<!-- =================================================================== -->
<!-- Initalization of directories and CLASSPATH, LIBPATH                 -->
<!-- =================================================================== -->

  <target name="init" depends="system.path.1, system.path.2">
    <mkdir dir="${basedir}/classes" />
    <path id="mycore.classpath">
      <fileset dir="${basedir}/lib" includes="*.jar"/>
      <path refid="system.classpath"  />
    </path>
  </target>

  <target name="system.path.1" if="MCR.System.SharedJarsDir">
    <path id="system.classpath">
      <fileset dir="${MCR.System.SharedJarsDir}" includes="_dummy_ ${MCR.System.Jars}"        />
    </path>
  </target>

  <target name="system.path.2" unless="MCR.System.SharedJarsDir">
    <path id="system.classpath" />
  </target>

<!-- =================================================================== -->
<!-- Installation													     -->
<!-- =================================================================== -->

	<target name="install">
		<mkdir dir="../module-imaging" />
		<copy todir="../module-imaging" flatten="false">
			<fileset dir="." excludes="CVS" />
		</copy>	
	</target>

<!-- =================================================================== -->
<!-- Synchronisation												     -->
<!-- =================================================================== -->

	<target name="synch">
		<echo level="info">Synchronisating Module-imaging to UNISTALLED-folder</echo>
		<copy todir="${env.MYCORE_HOME}/modules/module-imaging" flatten="false">
			<fileset dir="${env.MYCORE_HOME}/modules/UNINSTALLED_module-imaging" excludes="CVS" />
		</copy>	
	</target>
	
	
<!-- =================================================================== -->
<!-- Compiles all application classes                                    -->
<!-- =================================================================== -->

  <target name="javac" depends="init">
    <echo level="info">Compiling ${packages} </echo>
    <javac srcdir="${basedir}/modules/module-imaging/sources"
           destdir="${basedir}/classes"
           includes="${packages}"
           classpathref="mycore.classpath"
           debug="${debug}"
           optimize="${optimize}"
	       target="${javatarget}"
	       source="${sourcerelease}"
	       encoding="${sourceencoding}"
           deprecation="${deprecation}">
    </javac>
    <echo>---------------------------------------------------------</echo>
  </target>

  <target name="compile" depends="synch">
    <echo level="info">Compiling module imaging soures</echo>
    <antcall target="javac">
      <param name="packages" value="org/mycore/services/imaging/**"/>
    </antcall>
  </target>
	
	<target name="webapps" depends="synch">
		<copy todir="${basedir}/webapps/WEB-INF/classes" flatten="true">
			<fileset dir="${env.MYCORE_HOME}/modules/module-imaging/config" includes="mycore.properties.imaging" />
		</copy>
	</target>

<!-- =================================================================== -->

</project>
