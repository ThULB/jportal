<?xml version="1.0" encoding="UTF-8"?>

<!-- =================================================================== -->
<!-- MyCoRe-Imaging build file for use with ANT                          -->
<!--  												                     -->
<!-- Andreas Trappe 	- idea, concept			                         -->
<!-- Chi Vu Huu		- concept, development			                     -->
<!--												                     -->
<!-- $Revision: 1.1 $ $Date: 2008/04/11 09:09:38 $                      -->
<!-- =================================================================== -->

<project name="MyCoReModule - Imaging" default="usage" basedir="../..">

	<property name="build.sysclasspath" value="last" />
	<property name="module.base" value="imaging" />
	<property name="module.dir" value="${basedir}/modules/${module.base}" />

	<!-- =================================================================== -->
	<!-- Help on usage                                                       -->
	<!-- =================================================================== -->

	<target name="usage">
		<echo level="info">

      Available targets are:
        compile              --> Compiles all sources of this module

      Please do not use any of the other targets, they are internal.
		</echo>
	</target>
	
	<!-- =================================================================== -->
	<!-- Info                                                                -->
	<!-- =================================================================== -->

	<target name="info">
		<echo>${ant.project.name} will include programs for the optional imaging part.</echo>
	</target>
	
	<!-- =================================================================== -->
	<!-- Initalization of directories and CLASSPATH, LIBPATH                 -->
	<!-- =================================================================== -->

	<target name="init" depends="system.path.1, system.path.2">
		<mkdir dir="${basedir}/classes" />
		<path id="mycore.classpath">
			<fileset dir="${basedir}/lib" includes="*.jar"/>
			<path refid="system.classpath"  />
		</path>
	</target>

	<target name="system.path.1" if="MCR.System.SharedJarsDir">
		<path id="system.classpath">
			<fileset dir="${MCR.System.SharedJarsDir}" includes="_dummy_ ${MCR.System.Jars}"        />
		</path>
	</target>

	<target name="system.path.2" unless="MCR.System.SharedJarsDir">
		<path id="system.classpath" />
	</target>

    <!-- =================================================================== -->
    <!-- Compiles the sources from directory sources to directory classes    -->
    <!-- =================================================================== -->

    <target name="compile">
        <echo level="info">
			compiling ${ant.project.name} classes
	    </echo>

        <antcall target="javac">
            <param name="packages" value="org/mycore/services/imaging/**" />
        </antcall>
    </target>

    <target name="javac" depends="init">
        <echo level="info">compiling ${packages}</echo>
        <javac 
			srcdir="${module.dir}/sources" 
			destdir="${basedir}/classes" includes="${packages}" 
			classpathref="mycore.classpath" 
			debug="${debug}" 
			optimize="${optimize}" 
			target="${javatarget}" 
			source="${sourcerelease}" 
			encoding="${sourceencoding}" 
			deprecation="${deprecation}">
        </javac>
    </target>

	<!-- =================================================================== -->

</project>
