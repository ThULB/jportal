evaluationDependsOn(':jportal_mcr_module')

allprojects {
    apply plugin: 'java'
    apply plugin: 'maven'
    apply plugin: 'eclipse'

    group = "fsu.thulb"
    version = "2.0.18-SNAPSHOT"
    repositories {
        maven{ url "http://artifactory.mycore.de/mycore-releases" }

        maven{ url "http://artifactory.mycore.de/mycore-snapshots" }
    }
    configurations { provided }

    sourceSets {
        main.compileClasspath += configurations.provided
        test.compileClasspath += configurations.provided
        test.runtimeClasspath += configurations.provided
    }

    def mcrVersion = '2014.07-SNAPSHOT'
    dependencies{
        provided "org.mycore:mycore-base:$mcrVersion"
        provided("org.mycore:mycore-solr:$mcrVersion"){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided("org.mycore:mycore-mets:$mcrVersion"){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided("org.mycore:mycore-iview2:$mcrVersion"){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided("org.mycore:mycore-user2:$mcrVersion"){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided("org.mycore:mycore-classeditor:$mcrVersion"){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided('org.mycore.legacy:mycore-legacy-search:1.0-SNAPSHOT'){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided('org.mycore.sru:sru-adapter:0.0.1-SNAPSHOT'){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        provided('org.mycore.mets:mets-model:0.5-SNAPSHOT'){
            exclude group: 'org.mycore', module: 'mycore-base'
        }
        compile 'javax.servlet:javax.servlet-api:3.1.0'
        testCompile group: 'junit', name: 'junit', version: '4.+'
        testCompile group: 'org.mycore', name: 'mycore-base', version: mcrVersion, classifier: 'tests'
    }
}

subprojects {
    if(project.name.equals("jportal_mcr_module")){
        dependencies{
            compile project(':jportal-commons')
            compile project(':jportal_ext_web_lib')
            compile project(':jportal_iview2_plugin')
            compile 'de.uni-jena.thulb:JPJaxbPojos:0.0.1-SNAPSHOT'
            compile 'fsu.archiv.mycore.sru:sru-pica-import:0.0.1-SNAPSHOT'
            compile 'de.uni-jena.thulb.oai:archive-oai-resources:0.0.1-SNAPSHOT'

            compile 'log4j:log4j:1.2.17'
            compile 'com.sun.jersey.jersey-test-framework:jersey-test-framework-grizzly:1.17'
            compile 'com.sun.jersey.contribs:jersey-apache-client:1.17'
            compile 'com.sun.jersey:jersey-client:1.17'
            compile 'com.sun.jersey:jersey-server:1.17'
            compile 'org.easymock:easymock:3.2'
            compile 'xmlunit:xmlunit:1.3'
            compile 'javax.xml.bind:jaxb-api:2.2.1'
            compile 'com.sun.xml.bind:jaxb-impl:2.2.1.1'
        }
    } else if(project.name.equals("jportal_webapp")){
        apply plugin: 'war'
    }
    else if(!project.name.equals("jportal-commons") && !project.name.equals("jportal_ext_web_lib") && !project.name.equals("jportal_iview2_plugin")){
        dependencies{ provided project(':jportal_mcr_module') }
    }
}

dependencies { compile project(':jportal_mcr_module') }