var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var mycore;
(function (mycore) {
    (function (viewer) {
        (function (components) {
            var DfgViewerComponent = (function (_super) {
                __extends(DfgViewerComponent, _super);
                function DfgViewerComponent(_settings) {
                    _super.call(this);
                    this._settings = _settings;
                }
                DfgViewerComponent.prototype.handle = function (e) {
                    if (e.type == mycore.viewer.components.events.ProvideToolbarModelEvent.TYPE) {
                        this._toolbarModel = e.model;
                        this._dfgViewerControllGroup = new mycore.viewer.widgets.toolbar.ToolbarGroup("DfgViewerControllGroup", 70);
                        this._toolbarModel.addGroup(this._dfgViewerControllGroup);
                        this._dfgViewerLinkButton = new mycore.viewer.widgets.toolbar.ToolbarButton("DfgViewerLinkButton", "DFG Viewer");
                        this._dfgViewerControllGroup.addComponent(this._dfgViewerLinkButton);
                    }
                    if (e.type == mycore.viewer.widgets.toolbar.events.ButtonPressedEvent.TYPE) {
                        var buttonPressedEvent = e;
                        if (buttonPressedEvent.button.id == "DfgViewerLinkButton") {
                            var metsURL = this._settings.metsURL + "/" + this._settings.filePath + "?XSL.Style=dfg";
                            var encodedURL = encodeURIComponent(metsURL);
                            var win = window.open('http://dfg-viewer.de/show/?tx_dlf[id]=' + encodedURL, '_blank');
                            win.focus();
                        }
                    }
                };

                Object.defineProperty(DfgViewerComponent.prototype, "handlesEvents", {
                    get: function () {
                        var handleEvents = new Array();
                        handleEvents.push(mycore.viewer.components.events.ProvideToolbarModelEvent.TYPE);
                        handleEvents.push(mycore.viewer.widgets.toolbar.events.ButtonPressedEvent.TYPE);
                        return handleEvents;
                    },
                    enumerable: true,
                    configurable: true
                });

                DfgViewerComponent.prototype.init = function () {
                    this.trigger(new mycore.viewer.components.events.WaitForEvent(this, mycore.viewer.components.events.ProvideToolbarModelEvent.TYPE));
                };

                return DfgViewerComponent;
            })(mycore.viewer.components.ViewerComponent);
            components.DfgViewerComponent = DfgViewerComponent;
        })(viewer.components || (viewer.components = {}));
        var components = viewer.components;
    })(mycore.viewer || (mycore.viewer = {}));
    var viewer = mycore.viewer;
})(mycore || (mycore = {}));

addIviewComponent(mycore.viewer.components.DfgViewerComponent);
console.log("DFG VIEWER MODULE");
//# sourceMappingURL=dfg-viewer-module.js.map
